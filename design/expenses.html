<!DOCTYPE html>
<html>
<!--$
#include "dao.h"

#include <vector>
#include <string>

typedef struct {
    std::vector<dao::expense> expenses;
}expenses_html_input;
$-->

<head>
    <link href="common.css" rel="stylesheet"></link>
    <link href="jquery-ui.min.css" rel="stylesheet"></link>
    <script src="jquery-3.2.1.min.js"></script>
    <script src="jquery-ui.min.js"></script>
    <script src="utils.js"></script>
    <script src="expenses.js"></script>
</head>

<body onload="init()">
    <table>
        <thead>
            <th>Name</th>
            <th>Cost</th>
            <th>Frequency (Days)</th>
            <th>Started</th>
            <th>Ended</th>
            <th>Automatic</th>
        </thead>
        <tbody>
            <tr id="newExpense">
                <td><input name="NAME"></td>
                <td><input name="COST" type="number" step="0.01" value="0.00" placeholder="0.00"></td>
                <td><input name="FREQUENCY" type="number" step="1" value="0" placeholder="0"></td>
                <td>-</td>
                <td>-</td>
                <td><input name="AUTO" type="checkbox"></td>
                <td><input type="button" value="Save" onclick="saveExpense()"></td>
            </tr>
            <!--%
            for(dao::expense expense:input.expenses){
            %-->
            <tr>
                <td><input name="NAME" value="<!--=expense.name=-->"></td>
                <td><input name="COST" type="number" step="0.01" value="<!--=expense.cost=-->" placeholder="0.00"></td>
                <td><input name="FREQUENCY" type="number" step="1" value="<!--=expense.frequencyDays=-->" placeholder="0"></td>
                <td><input name="DATE" class="datePicker" value="<!--=expense.started=-->"></td>
                <td>
                    <!--%
                    if(expense.ended)
                    %-->
                    <input name="DATE" class="datePicker" value="<!--=expense.ended=-->">
                    <!--%
                    else
                    %-->
                    -
                </td>
                <td>
                    <!--%
                    if(expense.automatic)
                    %-->
                    <input name="AUTO" type="checkbox" checked>
                    <!--%
                    else
                    %-->
                    <input name="AUTO" type="checkbox">
                </td>
                <td><input type="button" value="&times;" onclick="deleteExpense('<!--=expense.id=-->')"></td>
            </tr>
            <!--%
            }
            %-->
        </tbody>
    </table>
</body>

</html>