<div class="modal fade" id="transModal" role="dialog">
	<div class="modal-dialog modal-lg">
		<div class="modal-content">
			<div class="modal-body">
				<button type="button" class="close" data-dismiss="modal">&times;</button>
				<form name="Form" data-ng-submit="saveTrans(true)">
					<table id="transTable" class="table table-condensed table-hover">
						<thead>
							<tr>
								<th width="5%"></th>
								<th width="15%">Date</th>
								<th width="10%">Amount</th>
								<th width="10%">Account</th>
								<th width="10%">Type</th>
								<th width="10%">Expense</th>
								<th width="40%">Comment</th>
							</tr>
						</thead>
						<tbody>
							<tr data-ng-include="'transactions/inputRow.html'"
								onload="initDatePickers()"></tr>
							<tr>
								<td colspan="2"><input type="button"
									value="Delete transaction" class="btn btn-danger"
									data-ng-click="deleteTrans(newTrans.id)"></td>
							</tr>
						</tbody>
					</table>
				</form>
			</div>
		</div>
	</div>
</div>
<h4>Manage transactions</h4>
<form name="FilterForm" data-ng-submit="filterTrans()">
	<table class="table">
		<thead>
			<tr>
				<th>Filter</th>
				<th></th>
			</tr>
		</thead>
		<tbody>
			<tr>
				<td>Dates</td>
				<td><div class="input-group input-daterange">
						<input type="text" class="daterangepicker form-control"
							pattern="\d{4}/\d{1,2}/\d{1,2}" data-ng-model="filter.fromDate">
						<div class="input-group-addon">to</div>
						<input type="text" class="daterangepicker form-control"
							pattern="\d{4}/\d{1,2}/\d{1,2}" data-ng-model="filter.toDate">
					</div></td>
			</tr>
			<tr>
				<td>Amount</td>
				<td><div class="input-group input-daterange">
						<input type="number" class="form-control"
							data-ng-model="filter.fromAmount">
						<div class="input-group-addon">to</div>
						<input type="number" class="form-control"
							data-ng-model="filter.toAmount">
					</div></td>
			</tr>
			<tr>
				<td>Account</td>
				<td><select class="form-control"
					data-ng-model="filter.account_id">
						<option value="0"></option>
						<option data-ng-repeat="acc in accounts" value="{{ acc.id }}">{{ acc.name }}</option>
				</select></td>
			</tr>
			<tr>
				<td>Type</td>
				<td><select class="form-control" data-ng-model="filter.type_id">
						<option value="0"></option>
						<option data-ng-repeat="ty in types" value="{{ ty.id }}">{{ ty.name }}</option>
				</select></td>
			</tr>
			<tr>
				<td>Expense</td>
				<td><select class="form-control"
					data-ng-model="filter.expense_id">
						<option value="0"></option>
						<option data-ng-repeat="exp in expenses" value="{{ exp.id }}">{{ exp.name }}</option>
				</select></td>
			</tr>
			<tr>
				<td>Comment</td>
				<td><input type="text" class="form-control"
					data-ng-model="filter.comment"></td>
			</tr>
			<tr>
				<td colspan="2"><div id="filterButtons" class="float-right">
						<input type="button" class="btn btn-default" value="Clear"
							data-ng-click="clearFilter()"><input type="submit"
							class="btn btn-primary" value="Apply"
							data-ng-class="{ 'btn-warning': FilterForm.$invalid }"
							data-ng-disabled="FilterForm.$invalid">
					</div></td>
			</tr>
		</tbody>
	</table>
</form>
<ul class="pagination float-right">
	<li data-ng-class="{ 'disabled':currentPage==1 }"><a href=""
		data-ng-click="goToPage(1)">First</a></li>
	<li data-ng-class="{ 'disabled':currentPage==1 }"><a href=""
		data-ng-click="goToPage((currentPage-1)||1)">&laquo;</a></li>
	<li data-ng-class="{ 'active':currentPage==(n+1) }"
		data-ng-repeat="n in [] | range:countPages()"
		data-ng-if="(n+1) > (currentPage-6) && (n+1) < (currentPage+6) "><a
		href="" data-ng-click="goToPage(n+1)">{{ n + 1 }}</a></li>
	<li data-ng-class="{ 'disabled':currentPage==pagesCount }"><a
		href=""
		data-ng-click="goToPage((currentPage+1 <= pagesCount) ? currentPage+1 : currentPage )">&raquo;</a></li>
	<li data-ng-class="{ 'disabled':currentPage==pagesCount }"><a
		href="" data-ng-click="goToPage(pagesCount)">Last</a></li>
</ul>
<form name="Form" data-ng-submit="saveTrans()">
	<table id="transTable" class="table table-condensed table-hover">
		<thead>
			<tr>
				<th width="5%" data-ng-click="sort('ID')">ID</th>
				<th width="15%" data-ng-click="sort('DATE', 'ID DESC')">Date</th>
				<th width="10%" data-ng-click="sort('AMOUNT', 'DATE DESC')">Amount</th>
				<th width="10%">Account</th>
				<th width="10%">Type</th>
				<th width="10%">Expense</th>
				<th width="40%" data-ng-click="sort('COMMENT', 'DATE DESC')">Comment</th>
			</tr>
		</thead>
		<tbody>
			<tr data-ng-include="'transactions/inputRow.html'"
				onload="initDatePickers()"></tr>
			<tr data-ng-repeat="t in transactions" data-ng-click="editTrans(t)">
				<td>{{ t.id }}</td>
				<td>{{ formatDate(t.date) }}</td>
				<td>{{ t.amount / 100 }}</td>
				<td>{{ getFromArray(accounts, t.account_id).name }}</td>
				<td>{{ getFromArray(types, t.type_id).name }}</td>
				<td>{{ getFromArray(expenses, t.expense_id).name }}</td>
				<td>{{ t.comment }}</td>
			</tr>
			<tr data-ng-repeat="t in [] | range:getExtraRows()">
				<td colspan="7">-</td>
			</tr>
		</tbody>
	</table>
</form>
