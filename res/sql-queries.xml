<?xml version="1.0" encoding="UTF-8"?>
<Queries>
	<Templates>
		<Insert>
		<![CDATA[
		REPLACE INTO {tablename} ({columns}) VALUES ({placeholders});
		]]>
		</Insert>
		<GetAll>
		<![CDATA[
		SELECT {columns} FROM {tablename} ORDER BY {orderby} LIMIT ?, ?;
		]]>
		</GetAll>
		<Get>
		<![CDATA[
		SELECT {columns} FROM {tablename} WHERE ID = ?;
		]]>
		</Get>
		<Delete>
		<![CDATA[
		DELETE FROM {tablename} WHERE ID = ?;
		]]>
		</Delete>
	</Templates>
	<Transactions>
		<CreateTable>
		<![CDATA[
		CREATE TABLE IF NOT EXISTS TRANSACTIONS
		(
			ID INTEGER PRIMARY KEY AUTOINCREMENT, 
			AMOUNT INTEGER NOT NULL, 
			COMMENT VARCHAR,
			ACCOUNT_ID INTEGER NOT NULL REFERENCES ACCOUNTS(ID), 
			TYPE_ID INTEGER NOT NULL REFERENCES TYPES(ID),
			EXPENSE_ID INTEGER REFERENCES EXPENSES(ID),
			DATE TIMESTAMP NOT NULL DEFAULT (STRFTIME('%s', 'NOW'))
		);
		]]>
		</CreateTable>
	</Transactions>
	<Accounts>
		<CreateTable>
		<![CDATA[
		CREATE TABLE IF NOT EXISTS ACCOUNTS
	    (
	        ID INTEGER PRIMARY KEY AUTOINCREMENT,
	        NAME VARCHAR UNIQUE NOT NULL
	    );
	    REPLACE INTO ACCOUNTS (NAME) VALUES ('Default');
		]]>
		</CreateTable>
	</Accounts>
	<Types>
		<CreateTable>
		<![CDATA[
		CREATE TABLE IF NOT EXISTS TYPES 
	    (
	        ID INTEGER PRIMARY KEY AUTOINCREMENT,
	        NAME VARCHAR UNIQUE NOT NULL
	    );
	    REPLACE INTO TYPES (NAME) VALUES ('Other');
		]]>
		</CreateTable>
	</Types>
	<Expenses>
		<CreateTable>
		<![CDATA[
		CREATE TABLE IF NOT EXISTS EXPENSES
	    (
	        ID INTEGER PRIMARY KEY AUTOINCREMENT,
	        NAME VARCHAR UNIQUE NOT NULL,
	        COST DECIMAL(10,2) NOT NULL,
	        FREQUENCY_DAYS INT NOT NULL,
	        STARTED TIMESTAMP NOT NULL DEFAULT (STRFTIME('%s', 'NOW')),
	        ENDED TIMESTAMP,
	        AUTOMATIC TINYINT NOT NULL DEFAULT 0
	    );
	    REPLACE INTO EXPENSES (NAME, COST, FREQUENCY_DAYS) VALUES ('N/A', 0, 1);
		]]>
		</CreateTable>
	</Expenses>
</Queries>