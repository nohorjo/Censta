<?xml version="1.0" encoding="UTF-8"?>
<Queries>
	<Templates>
		<Insert>
		<![CDATA[
		REPLACE INTO {tablename} ({columns}) VALUES ({placeholders});
		SELECT LAST_INSERT_ROWID();
		]]>
		</Insert>
		<GetAll>
		<![CDATA[
		SELECT {columns} FROM {tablename} LIMIT ?, ? ORDER BY {orderby};
		]]>
		</GetAll>
		<Get>
		<![CDATA[
		SELECT {columns} FROM {tablename} WHERE ID = ?;
		]]>
		</Get>
		<Delete>
		<![CDATA[
		DELETE FROM {tablename} WHERE ID = ?;
		]]>
		</Delete>
	</Templates>
	<Transactions>
		<CreateTable>
		<![CDATA[
		CREATE TABLE IF NOT EXISTS TRANSACTIONS
		(
			ID INTEGER PRIMARY KEY AUTOINCREMENT, 
			AMOUNT DECIMAL(10,2) NOT NULL, 
			COMMENT VARCHAR,
			ACCOUNT_ID INTEGER NOT NULL REFERENCES ACCOUNTS(ID), 
			TYPE_ID INTEGER NOT NULL REFERENCES TYPES(ID),
			DATE TIMESTAMP NOT NULL DEFAULT (STRFTIME('%s', 'NOW')), 
			EXPENSE_ID INTEGER REFERENCES EXPENSES(ID) 
		);
		]]>
		</CreateTable>
	</Transactions>
	<Accounts>
		<CreateTable>
		<![CDATA[
		CREATE TABLE ACCOUNTS
	    (
	        ID INTEGER PRIMARY KEY AUTOINCREMENT,
	        NAME VARCHAR NOT NULL
	    );
	    INSERT INTO ACCOUNTS (NAME) VALUES ('Default');
		]]>
		</CreateTable>
	</Accounts>
	<Types>
		<CreateTable>
		<![CDATA[
		CREATE TABLE TYPES 
	    (
	        ID INTEGER PRIMARY KEY AUTOINCREMENT,
	        NAME VARCHAR NOT NULL
	    );
	    INSERT INTO TYPES (NAME) VALUES ('Other');
		]]>
		</CreateTable>
	</Types>
	<Expenses>
		<CreateTable>
		<![CDATA[
		CREATE TABLE EXPENSES
	    (
	        ID INTEGER PRIMARY KEY AUTOINCREMENT,
	        NAME VARCHAR NOT NULL,
	        COST DECIMAL(10,2) NOT NULL,
	        FREQUENCY_DAYS INT NOT NULL,
	        STARTED TIMESTAMP NOT NULL DEFAULT (STRFTIME('%s', 'NOW')),
	        ENDED TIMESTAMP,
	        AUTOMATIC TINYINT NOT NULL DEFAULT 0
	    );
	    INSERT INTO EXPENSES (NAME, COST, FREQUENCY_DAYS) VALUES ('N/A', 0, 1);
		]]>
		</CreateTable>
	</Expenses>
</Queries>