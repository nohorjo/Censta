<?xml version="1.0" encoding="UTF-8"?>
<Queries>
	<Templates>
		<Insert>
		<![CDATA[
		REPLACE INTO {tablename} ({columns}) VALUES ({placeholders});
		]]>
		</Insert>
		<GetAll>
		<![CDATA[
		SELECT {columns} FROM {tablename} ORDER BY {orderby} LIMIT ?, ?;
		]]>
		</GetAll>
		<Get>
		<![CDATA[
		SELECT {columns} FROM {tablename} WHERE ID = ?;
		]]>
		</Get>
		<Delete>
		<![CDATA[
		DELETE FROM {tablename} WHERE ID = ?;
		]]>
		</Delete>
		<Count>
		<![CDATA[
		SELECT COUNT(*) FROM {tablename};
		]]>
		</Count>
	</Templates>
	<Transactions>
		<CreateTable>
		<![CDATA[
		CREATE TABLE IF NOT EXISTS TRANSACTIONS
		(
			ID INTEGER PRIMARY KEY AUTOINCREMENT, 
			AMOUNT INTEGER NOT NULL, 
			COMMENT VARCHAR,
			ACCOUNT_ID INTEGER NOT NULL REFERENCES ACCOUNTS(ID), 
			TYPE_ID INTEGER NOT NULL REFERENCES TYPES(ID),
			EXPENSE_ID INTEGER REFERENCES EXPENSES(ID),
			DATE TIMESTAMP NOT NULL DEFAULT (STRFTIME('%s', 'NOW'))
		);
		]]>
		</CreateTable>
		<UniqueComments>
		<![CDATA[
		SELECT DISTINCT COMMENT FROM TRANSACTIONS;
		]]>
		</UniqueComments>
	</Transactions>
	<Accounts>
		<CreateTable>
		<![CDATA[
		CREATE TABLE IF NOT EXISTS ACCOUNTS
	    (
	        ID INTEGER PRIMARY KEY AUTOINCREMENT,
	        NAME VARCHAR UNIQUE NOT NULL
	    );
	    INSERT INTO ACCOUNTS (ID, NAME) SELECT 1, 'Default' WHERE NOT EXISTS
	    (SELECT 1 FROM ACCOUNTS WHERE ID = 1);
		]]>
		</CreateTable>
	</Accounts>
	<Types>
		<CreateTable>
		<![CDATA[
		CREATE TABLE IF NOT EXISTS TYPES 
	    (
	        ID INTEGER PRIMARY KEY AUTOINCREMENT,
	        NAME VARCHAR UNIQUE NOT NULL
	    );
	    INSERT INTO TYPES (ID, NAME) SELECT 1, 'Other' WHERE NOT EXISTS
	    (SELECT 1 FROM TYPES WHERE ID = 1);
		]]>
		</CreateTable>
	</Types>
	<Expenses>
		<CreateTable>
		<![CDATA[
		CREATE TABLE IF NOT EXISTS EXPENSES
	    (
	        ID INTEGER PRIMARY KEY AUTOINCREMENT,
	        NAME VARCHAR UNIQUE NOT NULL,
	        COST INTEGER NOT NULL,
	        FREQUENCY_DAYS INT NOT NULL,
	        STARTED TIMESTAMP NOT NULL DEFAULT (STRFTIME('%s', 'NOW')),
	        ENDED TIMESTAMP,
	        AUTOMATIC TINYINT NOT NULL DEFAULT 0
	    );
	    INSERT INTO EXPENSES (ID, NAME, COST, FREQUENCY_DAYS) SELECT 1, 'N/A', 0, 1 WHERE NOT EXISTS
	    (SELECT 1 FROM EXPENSES WHERE ID = 1);
		]]>
		</CreateTable>
	</Expenses>
</Queries>