<h4>Summary</h4>
<div>
    <table class="table">
        <thead>
            <tr>
                <th width="20%"></th>
                <th width="20%"></th>
                <th></th>
            </tr>
        </thead>
        <tbody>
            <tr id="budgetMode">
                <td>
                    <label>Budget mode</label>
                </td>
                <td ng-click="getBudget()">
                    <select
                        class="form-control"
                        ng-change="getBudget(); initDatePickers()"
                        ng-model="budgetMode.mode"
                    >
                        <option value="expense">Expense based</option>
                        <option value="strictExpense">Strict expense based</option>
                        <option value="time">Time based</option>
                        <option value="manual">Manual</option>
                    </select>
                </td>
                <td class="no-animate" ng-show="budgetMode.mode == 'expense' || budgetMode.mode == 'strictExpense'">
                    <label>Expense rounds</label> 
                    <input
                        class="form-control small"
                        type="number"
                        step="1"
                        min="1"
                        ng-min="1"
                        ng-model="budgetMode.expenseRounds"
                        ng-change="getBudget()"
                        ng-model-options="{ 'debounce' : 500 }"
                    > 
                </td> 
                <td class="no-animate" ng-show="budgetMode.mode == 'time'">
                    <label>Next </label>
                    <input
                        class="form-control xsmall"
                        type="number"
                        step="1"
                        min="1"
                        ng-min="1"
                        ng-model="budgetMode.days"
                        ng-change="getBudget()"
                        ng-model-options="{ 'debounce' : 500 }"
                    >
                    <label> days</label>
                </td> 
                <td class="no-animate" ng-show="budgetMode.mode == 'manual'">
                    <label>Starting</label>
                    <input
                        id="manualStart"
                        type="text"
                        class="datepicker form-control small"
                        pattern="\d{4}/\d{1,2}/\d{1,2}"
                        ng-model="budgetMode.start"
                        ng-change="getBudget()"
                        ng-model-options="{ 'debounce' : 500 }"
                    >
                    <br/>
                    <label>Amount</label>
                    <div class="cell">
                        <input
                            class="form-control small"
                            type="number"
                            step="0.01"
                            ng-model="budgetMode.amount"
                            ng-change="getBudget()"
                            ng-model-options="{ 'debounce' : 500 }"
                            data-number-divide="100"
                        >
                        <br/>
                        <div ng-click="getBudget()">
                            <input
                                type="radio"
                                name="manualFrequency"
                                value="7"
                                ng-model="budgetMode.frequency"
                            >
                            Weekly
                            <input
                                type="radio"
                                name="manualFrequency"
                                value="30"
                                ng-model="budgetMode.frequency"
                            >
                            Monthly
                        </div> 
                    </div> 
                </td> 
            </tr>
            <tr>
                <td>
                    <label>Maintain positive cashflow</label>
                </td>
                <td colspan="2">
                    <label>Period</label>
                    <select
                        class="form-control small"
                        ng-change="getBudget()"
                        ng-model="budgetMode.cashflowPeriod"
                    >
                        <option value="0">Never</option> 
                        <option value="7">Week</option> 
                        <option value="30">Month</option> 
                        <option value="35">Five week</option> 
                        <option value="90">Quarter</option> 
                        <option value="180">Half year</option> 
                        <option value="365">Year</option> 
                    </select>
                </td>
            </tr>
            <tr ng-class="{ 'warning' : budget.afterAll < 0 && budget.afterAuto, 'danger' : !budget.afterAuto && budget.afterAll < 0 }">
                <td>
                    <label>Budget</label>
                </td>
                <td>{{ (budget.afterAll/100).toFixed(2) }}</td>
                <td>
                    <div ng-show="budget.afterAll < 0">
                         <span ng-show="budgetMode.mode == 'expense' || budgetMode.mode == 'strictExpense' || budgetMode.mode == 'time'">
                            You may need to re-evaluate your <a href="#!expenses">expenses</a>
                        </span>
                        <span ng-show="budgetMode.mode == 'manual'">You have overspent your budget</span> 
                    </div>
                </td>
            </tr>
            <tr ng-class="{ 'danger' : budget.afterAuto < 0 }" ng-show="budget.afterAuto !== undefined">
                <td>
                    <label>Budget (Only automatic expenses)</label>
                </td>
                <td>{{ (budget.afterAuto/100).toFixed(2) }}</td>
                <td>
                    <span ng-show="budget.afterAuto < 0">
                        You may not have enough to pay for some automatic expenses
                    </span>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<div ng-show="cumulativeSums.length">
    <div style="display: inline-block">
        <select
            class="form-control small"
            ng-change="drawGraph()"
            ng-model="movingAvgDays"
        >
            <option value="7">Weekly</option> 
            <option value="30">Monthly</option> 
            <option value="35">Five weekly</option> 
            <option value="90">Quarterly</option> 
            <option value="180">Half-yearly</option> 
            <option value="365">Annually</option> 
        </select>
    </div>
    <span>moving average</span>
</div>
<div id="trans-chart" ng-click="filterDate($event)"></div>
